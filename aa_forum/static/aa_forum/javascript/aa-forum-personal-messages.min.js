$(document).ready(()=>{const e=$("button.btn-read-personal-message");$(e).on("click",e=>{const a=$(e.currentTarget),s=a.data("sender"),r=a.data("recipient"),o=a.data("message"),n=a.data("message-folder");fetchPost({url:aaForumJsSettings.url.readMessage,csrfToken:aaForumJsSettings.form.csrfToken,payload:{sender:s,recipient:r,message:o},responseIsJson:!1}).then(e=>{if(void 0!==e&&""!==e){const a=$(`#aa-forum-personal-message-id-${o} .card-aa-forum-personal-messages-message`);a.html(e).removeClass("d-none"),"inbox"===n&&($(`#aa-forum-personal-message-id-${o} .card-aa-forum-personal-messages-item`).removeClass("panel-aa-forum-personal-messages-item-unread"),fetchGet({url:aaForumJsSettings.url.unreadMessagesCount}).then(e=>{0===e.unread_messages_count?$(".aa-forum-badge-personal-messages-unread-count").remove():$(".aa-forum-badge-personal-messages-unread-count").html(e.unread_messages_count)}).catch(e=>{console.error("Error fetching unread messages count:",e)}))}}).catch(e=>{console.error("Error reading message:",e)})})});
//# sourceMappingURL=aa-forum-personal-messages.min.js.map